{
  "paragraphs": [
    {
      "title": "Populate ActressesAndActorsDF Reference Data Created In Earlier Setup Reference Data Notebook",
      "text": "val allRatingsDF \u003d sqlContext.sql(\"SELECT fromuserid, touserid FROM ratings_temp\")\nallRatingsDF.show(30)",
      "dateUpdated": "Nov 19, 2015 5:26:30 PM",
      "config": {
        "colWidth": 12.0,
        "editorMode": "ace/mode/scala",
        "title": true,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        }
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1445082225970_290386356",
      "id": "20151017-114345_2015934791",
      "result": {
        "code": "SUCCESS",
        "type": "TEXT",
        "msg": "allRatingsDF: org.apache.spark.sql.DataFrame \u003d [fromuserid: int, touserid: int]\n+----------+--------+\n|fromuserid|touserid|\n+----------+--------+\n|     49816|   11179|\n|     49816|   20089|\n|     49816|   23021|\n|     49816|   23895|\n|     49816|   27728|\n|     49816|   31116|\n|     49816|   33216|\n|     49816|   40541|\n|     49816|   52203|\n|     49816|   55441|\n|     49816|   56806|\n|     49816|   81764|\n|     49816|   84294|\n|     49816|   95172|\n|     49816|  128536|\n|     49816|  132644|\n|     49816|  151057|\n|     49816|  183691|\n|     49816|  196720|\n|     49816|  210903|\n|     22680|    1029|\n|     22680|    3644|\n|     22680|    5472|\n|     22680|    6036|\n|     22680|    7602|\n|     22680|    8794|\n|     22680|   10531|\n|     22680|   10658|\n|     22680|   11994|\n|     22680|   12513|\n+----------+--------+\nonly showing top 30 rows\n\n"
      },
      "dateCreated": "Oct 17, 2015 11:43:45 AM",
      "dateStarted": "Nov 19, 2015 5:26:30 PM",
      "dateFinished": "Nov 19, 2015 5:26:30 PM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Most Influential Users By Like Graph",
      "text": "%md ![Most Desirable Users](https://raw.githubusercontent.com/cfregly/spark-after-dark/master/img/pagerank.png)",
      "dateUpdated": "Nov 19, 2015 5:26:43 PM",
      "config": {
        "tableHide": false,
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "editorHide": false,
        "title": true,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        }
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1435977492747_2053618668",
      "id": "20150704-023812_81431125",
      "result": {
        "code": "SUCCESS",
        "type": "HTML",
        "msg": "\u003cp\u003e\u003cimg src\u003d\"https://raw.githubusercontent.com/cfregly/spark-after-dark/master/img/pagerank.png\" alt\u003d\"Most Desirable Users\" /\u003e\u003c/p\u003e\n"
      },
      "dateCreated": "Jul 4, 2015 2:38:12 AM",
      "dateStarted": "Nov 19, 2015 5:26:43 PM",
      "dateFinished": "Nov 19, 2015 5:26:43 PM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Run PageRank On The Like Graph And Enrich With Reference Data",
      "text": "import org.apache.spark.graphx._\nimport org.apache.spark.graphx.util._\n\nval edgeTuples \u003d ratingsDF.map(rating \u003d\u003e \n  (rating(0).toString.toLong, rating(1).toString.toLong)\n)\n\nval convergenceThreshold \u003d 0.01\nval graph \u003d Graph.fromEdgeTuples(edgeTuples, \"\", Some(PartitionStrategy.RandomVertexCut))\nval pageRank \u003d graph.pageRank(convergenceThreshold).cache()\n\nval topInfluencers \u003d pageRank.vertices.top(10)(Ordering.by(rank \u003d\u003e rank._2))\nval topInfluencersDF \u003d sc.parallelize(topInfluencers).toDF(\"user_id\", \"rank\")\n",
      "dateUpdated": "Nov 19, 2015 5:27:04 PM",
      "config": {
        "tableHide": false,
        "colWidth": 12.0,
        "editorMode": "ace/mode/scala",
        "editorHide": false,
        "title": true,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        }
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1435977512315_408062946",
      "id": "20150704-023832_2082939526",
      "result": {
        "code": "SUCCESS",
        "type": "TEXT",
        "msg": "import org.apache.spark.graphx._\nimport org.apache.spark.graphx.util._\nedgeTuples: org.apache.spark.rdd.RDD[(Long, Long)] \u003d MapPartitionsRDD[108] at map at \u003cconsole\u003e:41\nconvergenceThreshold: Double \u003d 0.01\ngraph: org.apache.spark.graphx.Graph[String,Int] \u003d org.apache.spark.graphx.impl.GraphImpl@34ff847f\npageRank: org.apache.spark.graphx.Graph[Double,Double] \u003d org.apache.spark.graphx.impl.GraphImpl@29817735\ntopInfluencers: Array[(org.apache.spark.graphx.VertexId, Double)] \u003d Array((31116,50.57940583488632), (71636,44.221064738255436), (22319,26.61644608000305), (74958,25.842680647774806), (33216,25.19566817712017), (117981,24.914011613545956), (156148,24.02479615363395), (1721,19.23753040624026), (121859,18.0274895569968), (109101,17.851414847145513))\ntopInfluencersDF: org.apache.spark.sql.DataFrame \u003d [user_id: bigint, rank: double]\n"
      },
      "dateCreated": "Jul 4, 2015 2:38:32 AM",
      "dateStarted": "Nov 19, 2015 5:27:04 PM",
      "dateFinished": "Nov 19, 2015 5:46:46 PM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Show Top Influencers",
      "text": "z.show(topInfluencersDF)",
      "dateUpdated": "Nov 19, 2015 5:28:13 PM",
      "config": {
        "tableHide": false,
        "colWidth": 12.0,
        "editorMode": "ace/mode/scala",
        "editorHide": false,
        "title": true,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        }
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1435977607013_1537471179",
      "id": "20150704-024007_801415737",
      "result": {
        "code": "SUCCESS",
        "type": "TABLE",
        "msg": "user_id\trank\n31116\t50.57940583488632\n71636\t44.221064738255436\n22319\t26.61644608000305\n74958\t25.842680647774806\n33216\t25.19566817712017\n117981\t24.914011613545956\n156148\t24.02479615363395\n1721\t19.23753040624026\n121859\t18.0274895569968\n109101\t17.851414847145513\n"
      },
      "dateCreated": "Jul 4, 2015 2:40:07 AM",
      "dateStarted": "Nov 19, 2015 5:28:13 PM",
      "dateFinished": "Nov 19, 2015 5:46:47 PM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "",
      "dateUpdated": "Nov 19, 2015 5:25:08 PM",
      "config": {
        "colWidth": 12.0,
        "editorMode": "ace/mode/scala",
        "editorHide": false,
        "tableHide": false,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        }
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1443328008701_-1015777802",
      "id": "20150927-042648_1970470505",
      "result": {
        "code": "SUCCESS",
        "type": "TEXT"
      },
      "dateCreated": "Sep 27, 2015 4:26:48 AM",
      "dateStarted": "Nov 5, 2015 4:41:15 AM",
      "dateFinished": "Nov 5, 2015 4:41:15 AM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    }
  ],
  "name": "Ratings/02:  Top Influencers (PageRank)",
  "id": "2B6535QE2",
  "angularObjects": {
    "2ARR8UZDJ": [],
    "2AS9P7JSA": [],
    "2AR33ZMZJ": []
  },
  "config": {
    "looknfeel": "default"
  },
  "info": {}
}