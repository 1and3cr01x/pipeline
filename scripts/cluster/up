#!/bin/bash

echo 'Usage:'
echo '  up <tag>'
echo ''
echo 'Example:'
echo '  up v1.1.0'

###################################
# Dashboards and Metrics
###################################
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/dashboard.ml/turbine-deploy.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/dashboard.ml/turbine-svc.yaml

kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/dashboard.ml/hystrix-deploy.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/dashboard.ml/hystrix-svc.yaml

kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/dashboard.ml/weavescope/weavescope.yaml

###################################
# Model Training and Data Services
###################################
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/sql.ml/mysql-master-deploy.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/sql.ml/mysql-master-svc.yaml

kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/hdfs.ml/namenode-deploy.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/hdfs.ml/namenode-svc.yaml

kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/apachespark.ml/master-deploy.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/apachespark.ml/master-svc.yaml

kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/apachespark.ml/worker-deploy.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/apachespark.ml/worker-hpa.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/apachespark.ml/worker-svc.yaml

kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/metastore.ml/metastore-deploy.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/metastore.ml/metastore-svc.yaml

kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/jupyterhub.ml/jupyterhub-deploy.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/jupyterhub.ml/jupyterhub-svc.yaml

kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/presto.ml/presto-master-deploy.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/presto.ml/presto-master-svc.yaml

kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/presto.ml/presto-worker-deploy.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/presto.ml/presto-worker-hpa.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/presto.ml/presto-worker-svc.yaml

kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/presto.ml/presto-ui-deploy.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/presto.ml/presto-ui-svc.yaml

kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/web.ml/home-deploy.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/web.ml/home-svc.yaml

kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/scheduler.ml/airflow-deploy.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/scheduler.ml/airflow-svc.yaml

kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/zeppelin.ml/zeppelin-deploy.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/zeppelin.ml/zeppelin-svc.yaml

###################################
# Model Prediction Services
###################################
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/prediction.ml/java-deploy.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/prediction.ml/java-svc.yaml

kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/prediction.ml/keyvalue-deploy.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/prediction.ml/keyvalue-svc.yaml

kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/prediction.ml/pmml-deploy.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/prediction.ml/pmml-svc.yaml

kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/prediction.ml/python-deploy.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/prediction.ml/python-svc.yaml

kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/prediction.ml/tensorflow-deploy.yaml
kubectl create -f https://raw.githubusercontent.com/fluxcapacitor/pipeline/$1/prediction.ml/tensorflow-svc.yaml
