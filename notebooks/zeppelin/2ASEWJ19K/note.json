{
  "paragraphs": [
    {
      "title": "Populate Items Reference Data for Enrichment",
      "text": "val itemsDF \u003d sqlContext.sql(\"SELECT id, title, description, tags, img FROM items_temp\")\nitemsDF.show(30)",
      "dateUpdated": "Dec 1, 2015 6:49:21 AM",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "editorMode": "ace/mode/scala",
        "title": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1445082225970_290386356",
      "id": "20151017-114345_2015934791",
      "result": {
        "code": "SUCCESS",
        "type": "TEXT",
        "msg": "itemsDF: org.apache.spark.sql.DataFrame \u003d [id: bigint, title: string, description: string, tags: string, img: string]\n+-----+--------------------+--------------------+--------------------+--------------------+\n|   id|               title|         description|                tags|                 img|\n+-----+--------------------+--------------------+--------------------+--------------------+\n| null|                null|                null|                null|                null|\n|90001|         Linda Blair|From the age of f...|St. Louis, Missou...|img/people/90001.jpg|\n|90002|      Shannon Whirry|Shannon Whirry is...|Green Lake, Wisco...|img/people/90002.jpg|\n|90003|      Rosalind Allen|Rosalind Allen (b...|Wellington, New Z...|img/people/90003.jpg|\n|90004|     Bobbie Phillips|Brains and beauty...|Salisbury, North ...|img/people/90004.jpg|\n|90005|Keshia Knight Pul...|Keshia Knight Pul...|Newark, New Jerse...|img/people/90005.jpg|\n|90006|         Tatyana Ali|On January 24, 19...|Brooklyn, New Yor...|img/people/90006.jpg|\n|90007|      Angell Conwell|Born in the tiny ...|Orangeburg, South...|img/people/90007.jpg|\n|90008|  Shannah Laumeister|Shannah Laumeiste...|San Francisco, Ca...|img/people/90008.jpg|\n|90009|           Pam Grier|Pam Grier was bor...|Winstom-Salem, No...|img/people/90009.jpg|\n|90010|    Tiffani Thiessen|Tiffani-Amber Thi...|Long Beach, Calif...|img/people/90010.jpg|\n|90011|         Ashley Judd|Ashley Judd was b...|Granada Hills, Ca...|img/people/90011.jpg|\n|90012|         Stacey Dash|Stacey Dash was b...|Bronx, New York, ...|img/people/90012.jpg|\n|90013|       Sofia Vergara|Sofia Margarita V...|Barranquilla, Atl...|img/people/90013.jpg|\n|90014|        Gail O\u0027Grady|Gail O\u0027Grady was ...|Detroit, Michigan...|img/people/90014.jpg|\n|90015|       Barbara Niven|Barbara Niven was...|Portland, Oregon,...|img/people/90015.jpg|\n|10001|   Leonardo DiCaprio|Few actors in the...|Hollywood, Califo...|img/people/10001.jpg|\n|10002|     Anthony Hopkins|Anthony Hopkins w...|Port Talbot, Glam...|img/people/10002.jpg|\n|10003|           Al Pacino|One of the greate...|Manhattan, New Yo...|img/people/10003.jpg|\n|10004|      Morgan Freeman|With an authorita...|Memphis, Tennesse...|img/people/10004.jpg|\n|10005|    James Gandolfini|James Gandolfini ...|Westwood, New Jer...|img/people/10005.jpg|\n|10006|       Marlon Brando|Marlon Brando is ...|Manhattan, New Yo...|img/people/10006.jpg|\n|10007|   Denzel Washington|Denzel Hayes Wash...|Mount Vernon, New...|img/people/10007.jpg|\n|10008|      Robert De Niro|Robert De Niro, t...|Manhattan, New Yo...|img/people/10008.jpg|\n|10009|    Chazz Palminteri|Bronx-born and ra...|Bronx, New York, ...|img/people/10009.jpg|\n|10010|           Tom Hanks|Thomas Jeffrey Ha...|Concord, Californ...|img/people/10010.jpg|\n|10011|       John Travolta|John Travolta was...|Englewood, New Yo...|img/people/10011.jpg|\n|10012|         Johnny Depp|Johnny Depp is pe...|Owensboro, Kentuc...|img/people/10012.jpg|\n|10013|       Mark Wahlberg|American actor Ma...|Boston, Massachus...|img/people/10013.jpg|\n|10014|        James Franco|Known for his bre...|Palo Alto, Califo...|img/people/10014.jpg|\n+-----+--------------------+--------------------+--------------------+--------------------+\nonly showing top 30 rows\n\n"
      },
      "dateCreated": "Oct 17, 2015 11:43:45 AM",
      "dateStarted": "Dec 1, 2015 6:49:21 AM",
      "dateFinished": "Dec 1, 2015 6:49:21 AM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Most Influential Users By Like Graph",
      "text": "%md ![Most Desirable Users](https://raw.githubusercontent.com/cfregly/spark-after-dark/master/img/pagerank.png)",
      "dateUpdated": "Dec 1, 2015 6:49:21 AM",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "title": true,
        "editorHide": true,
        "tableHide": false,
        "editorMode": "ace/mode/markdown"
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1435977492747_2053618668",
      "id": "20150704-023812_81431125",
      "result": {
        "code": "SUCCESS",
        "type": "HTML",
        "msg": "\u003cp\u003e\u003cimg src\u003d\"https://raw.githubusercontent.com/cfregly/spark-after-dark/master/img/pagerank.png\" alt\u003d\"Most Desirable Users\" /\u003e\u003c/p\u003e\n"
      },
      "dateCreated": "Jul 4, 2015 2:38:12 AM",
      "dateStarted": "Dec 1, 2015 6:49:21 AM",
      "dateFinished": "Dec 1, 2015 6:49:21 AM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Run PageRank On The Like Graph And Enrich With Reference Data",
      "text": "import org.apache.spark.graphx._\nimport org.apache.spark.graphx.util._\n\nval edgeTuples \u003d itemRatingsDF.map(rating \u003d\u003e (rating(0).toString.toLong, rating(1).toString.toLong))\n\nval convergenceThreshold \u003d 0.01\n\nval graph \u003d Graph.fromEdgeTuples(edgeTuples, \"\", Some(PartitionStrategy.RandomVertexCut))\nval pageRank \u003d graph.pageRank(convergenceThreshold).cache()\n\nval topInfluencers \u003d pageRank.vertices.top(10)(Ordering.by(rank \u003d\u003e rank._2))\nval topInfluencersDF \u003d sc.parallelize(topInfluencers).toDF(\"itemId\", \"rank\")\n",
      "dateUpdated": "Dec 1, 2015 6:49:50 AM",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "title": true,
        "editorHide": false,
        "tableHide": false,
        "editorMode": "ace/mode/scala"
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1435977512315_408062946",
      "id": "20150704-023832_2082939526",
      "result": {
        "code": "SUCCESS",
        "type": "TEXT",
        "msg": "import org.apache.spark.graphx._\nimport org.apache.spark.graphx.util._\nedgeTuples: org.apache.spark.rdd.RDD[(Long, Long)] \u003d MapPartitionsRDD[289] at map at \u003cconsole\u003e:70\nconvergenceThreshold: Double \u003d 0.01\ngraph: org.apache.spark.graphx.Graph[String,Int] \u003d org.apache.spark.graphx.impl.GraphImpl@2648f9e8\npageRank: org.apache.spark.graphx.Graph[Double,Double] \u003d org.apache.spark.graphx.impl.GraphImpl@1f4aeffc\ntopInfluencers: Array[(org.apache.spark.graphx.VertexId, Double)] \u003d Array((10001,0.16841666666666666), (90004,0.16841666666666666), (90001,0.16841666666666666), (10011,0.16841666666666666), (90002,0.16841666666666666), (90011,0.16841666666666666), (10003,0.16841666666666666), (10009,0.16841666666666666), (90003,0.16841666666666666), (10013,0.15425))\ntopInfluencersDF: org.apache.spark.sql.DataFrame \u003d [itemId: bigint, rank: double]\n"
      },
      "dateCreated": "Jul 4, 2015 2:38:32 AM",
      "dateStarted": "Dec 1, 2015 6:49:50 AM",
      "dateFinished": "Dec 1, 2015 6:49:52 AM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Enrich the Top Influencers with reference data",
      "text": "val enrichedTopInfluencersDF \u003d \n  topInfluencersDF.join(itemsDF,\n    $\"id\" \u003d\u003d\u003d $\"itemId\").select($\"id\", $\"title\", $\"description\", $\"img\", $\"rank\").limit(5).cache()\n\nenrichedTopInfluencersDF.show()",
      "dateUpdated": "Dec 1, 2015 6:49:54 AM",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "editorMode": "ace/mode/scala",
        "title": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1446485309012_-592908703",
      "id": "20151102-172829_1066190094",
      "result": {
        "code": "SUCCESS",
        "type": "TEXT",
        "msg": "enrichedTopInfluencersDF: org.apache.spark.sql.DataFrame \u003d [id: bigint, title: string, description: string, img: string, rank: double]\n+-----+-----------------+--------------------+--------------------+-------------------+\n|   id|            title|         description|                 img|               rank|\n+-----+-----------------+--------------------+--------------------+-------------------+\n|10001|Leonardo DiCaprio|Few actors in the...|img/people/10001.jpg|0.16841666666666666|\n|90004|  Bobbie Phillips|Brains and beauty...|img/people/90004.jpg|0.16841666666666666|\n|90001|      Linda Blair|From the age of f...|img/people/90001.jpg|0.16841666666666666|\n|10011|    John Travolta|John Travolta was...|img/people/10011.jpg|0.16841666666666666|\n|90002|   Shannon Whirry|Shannon Whirry is...|img/people/90002.jpg|0.16841666666666666|\n+-----+-----------------+--------------------+--------------------+-------------------+\n\n"
      },
      "dateCreated": "Nov 2, 2015 5:28:29 PM",
      "dateStarted": "Dec 1, 2015 6:49:54 AM",
      "dateFinished": "Dec 1, 2015 6:49:54 AM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Save Top Influencers to ElasticSearch",
      "text": "import org.elasticsearch.spark.sql._\nimport org.apache.spark.sql.SaveMode\n\nval esConfig \u003d Map(\"pushdown\" -\u003e \"true\", \"es.nodes\" -\u003e \"127.0.0.1\", \"es.port\" -\u003e \"9200\")\nenrichedTopInfluencersDF.write.format(\"org.elasticsearch.spark.sql\").mode(SaveMode.Overwrite).options(esConfig).save(\"advancedspark/top-influencers\")",
      "dateUpdated": "Dec 1, 2015 6:50:01 AM",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "title": true,
        "editorHide": false,
        "tableHide": false,
        "editorMode": "ace/mode/scala"
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1435977607013_1537471179",
      "id": "20150704-024007_801415737",
      "result": {
        "code": "SUCCESS",
        "type": "TEXT",
        "msg": "import org.elasticsearch.spark.sql._\nimport org.apache.spark.sql.SaveMode\nesConfig: scala.collection.immutable.Map[String,String] \u003d Map(pushdown -\u003e true, es.nodes -\u003e 127.0.0.1, es.port -\u003e 9200)\n"
      },
      "dateCreated": "Jul 4, 2015 2:40:07 AM",
      "dateStarted": "Dec 1, 2015 6:50:01 AM",
      "dateFinished": "Dec 1, 2015 6:50:02 AM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "",
      "dateUpdated": "Dec 1, 2015 6:49:21 AM",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "editorHide": false,
        "tableHide": false,
        "editorMode": "ace/mode/scala"
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1443328008701_-1015777802",
      "id": "20150927-042648_1970470505",
      "result": {
        "code": "SUCCESS",
        "type": "TEXT"
      },
      "dateCreated": "Sep 27, 2015 4:26:48 AM",
      "dateStarted": "Dec 1, 2015 6:49:25 AM",
      "dateFinished": "Dec 1, 2015 6:49:25 AM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    }
  ],
  "name": "Live Ratings/02:  Top Influencers (PageRank)",
  "id": "2ASEWJ19K",
  "angularObjects": {
    "2ARR8UZDJ": [],
    "2AS9P7JSA": [],
    "2AR33ZMZJ": []
  },
  "config": {
    "looknfeel": "default"
  },
  "info": {}
}