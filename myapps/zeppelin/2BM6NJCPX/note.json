{
  "paragraphs": [
    {
      "text": "%md ![SVD](http://advancedspark.com/img/svd.png)",
      "dateUpdated": "May 11, 2016 6:02:17 AM",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "enabled": true,
        "editorMode": "ace/mode/scala",
        "editorHide": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1462812135673_-2088906267",
      "id": "20160509-164215_300469675",
      "result": {
        "code": "SUCCESS",
        "type": "HTML",
        "msg": "\u003cp\u003e\u003cimg src\u003d\"http://advancedspark.com/img/svd.png\" alt\u003d\"SVD\" /\u003e\u003c/p\u003e\n"
      },
      "dateCreated": "May 9, 2016 4:42:15 PM",
      "dateStarted": "May 11, 2016 6:02:17 AM",
      "dateFinished": "May 11, 2016 6:02:17 AM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "val nameOrPrefix \u003d \"\"\n\n// Put this variable into Zeppelin\u0027s ResourcePool to be accessed by Python later\nz.put(\"nameOrPrefix\", nameOrPrefix)",
      "dateUpdated": "May 11, 2016 6:09:55 AM",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "enabled": true,
        "editorMode": "ace/mode/scala"
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1462946685056_1740753861",
      "id": "20160511-060445_1084856315",
      "dateCreated": "May 11, 2016 6:04:45 AM",
      "status": "PENDING",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Perform Singular Value Decomposition (SVD)",
      "text": "val numSingularValues \u003d 8\n\nval svd \u003d scaledImagesAsPixelsVectorMatrix.computeSVD(numSingularValues, computeU \u003d false)",
      "dateUpdated": "May 11, 2016 6:09:43 AM",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "enabled": true,
        "title": true,
        "editorMode": "ace/mode/scala"
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1462812143008_-2007324176",
      "id": "20160509-164223_141783922",
      "result": {
        "code": "ERROR",
        "type": "TEXT",
        "msg": "numSingularValues: Int \u003d 8\n\u003cconsole\u003e:87: error: not found: value scaledImagesAsPixelsVectorMatrix\n       val svd \u003d scaledImagesAsPixelsVectorMatrix.computeSVD(numSingularValues, computeU \u003d false)\n                 ^\n"
      },
      "dateCreated": "May 9, 2016 4:42:23 PM",
      "dateStarted": "May 11, 2016 6:02:17 AM",
      "dateFinished": "May 11, 2016 5:48:02 AM",
      "status": "RUNNING",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "val singularValues \u003d svd.s.toArray.zipWithIndex.map(tuple \u003d\u003e tuple.swap)\n\nz.show(sc.parallelize(singularValues).toDF(\"numSingularValues\", \"singularValue\"))",
      "dateUpdated": "May 11, 2016 6:02:17 AM",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "enabled": true,
        "editorMode": "ace/mode/scala"
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1462812235741_337105758",
      "id": "20160509-164355_1177395846",
      "result": {
        "code": "ERROR",
        "type": "TEXT",
        "msg": "\u003cconsole\u003e:74: error: not found: value svd\n         val singularValues \u003d svd.s.toArray.zipWithIndex.map(tuple \u003d\u003e tuple.swap)\n                              ^\n"
      },
      "dateCreated": "May 9, 2016 4:43:55 PM",
      "dateStarted": "May 11, 2016 6:02:18 AM",
      "dateFinished": "May 9, 2016 4:44:07 PM",
      "status": "PENDING",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "MatrixIO.saveArray(svd.s.toArray, s\"/tmp/${nameOrPrefix}/svd-s.csv\")",
      "dateUpdated": "May 11, 2016 6:07:04 AM",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "enabled": true,
        "editorMode": "ace/mode/scala"
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1462812247428_1266305000",
      "id": "20160509-164407_233633438",
      "result": {
        "code": "ERROR",
        "type": "TEXT",
        "msg": "\u003cconsole\u003e:79: error: not found: value MatrixIO\n              MatrixIO.saveArray(svd.s.toArray, s\"${outputCsvPath}/${name}/svd-s.csv\")\n              ^\n"
      },
      "dateCreated": "May 9, 2016 4:44:07 PM",
      "dateStarted": "May 9, 2016 4:44:10 PM",
      "dateFinished": "May 9, 2016 4:44:10 PM",
      "status": "ABORT",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%pyspark\n\nimport matplotlib.pyplot as plt; plt.rcdefaults()\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport StringIO\n\ndef show(p):\n    img \u003d StringIO.StringIO()\n    p.savefig(img, format\u003d\u0027svg\u0027)\n    img.seek(0)\n    print \"%html \u003cdiv style\u003d\u0027width:600px\u0027\u003e\" + img.buf + \"\u003c/div\u003e\"\n    \ndef plot_gallery(images, h, w, n_row\u003d2, n_col\u003d4):\n    plt.clf()\n    \"\"\"Helper function to plot a gallery of portraits\"\"\"\n    plt.figure(figsize\u003d(1.8*n_col, 2.5*n_row))\n    plt.subplots_adjust(bottom\u003d0, left\u003d0.01, right\u003d0.99, top\u003d0.90, hspace\u003d0.35)\n    for i in range(n_row * n_col):\n        plt.subplot(n_row, n_col, i + 1)\n        plt.imshow(images[:, i].reshape((h, w)), cmap\u003dplt.cm.gray)\n        plt.title(\"Eigenface %d\" % (i + 1), size\u003d12)\n        plt.xticks(())\n        plt.yticks(())",
      "dateUpdated": "May 11, 2016 6:05:58 AM",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1462946730101_-749478938",
      "id": "20160511-060530_427552279",
      "dateCreated": "May 11, 2016 6:05:30 AM",
      "status": "READY",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%pyspark \n\n# Get this variable from Zeppelin\u0027s ResourcePool in Python\nnameOrPrefix \u003d z.get(\"nameOrPrefix\")        \n\npcgwb \u003d np.loadtxt(\"/tmp/%s/svd-s.csv\" % nameOrPrefix, delimiter\u003d\",\")\n#print(pcgwb.shape)\n\nplot_gallery(pcgwb, 50, 50)\n\nshow(plt)",
      "dateUpdated": "May 11, 2016 6:06:25 AM",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "enabled": true,
        "editorMode": "ace/mode/scala"
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1462946753853_1617927017",
      "id": "20160511-060553_1502628140",
      "dateCreated": "May 11, 2016 6:05:53 AM",
      "status": "READY",
      "progressUpdateIntervalMs": 500
    },
    {
      "dateUpdated": "May 11, 2016 6:02:17 AM",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "enabled": true,
        "editorMode": "ace/mode/scala"
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1462812250590_-1079524368",
      "id": "20160509-164410_1232441246",
      "dateCreated": "May 9, 2016 4:44:10 PM",
      "status": "PENDING",
      "progressUpdateIntervalMs": 500
    }
  ],
  "name": "Images/02: Eigenfaces (SVD)",
  "id": "2BM6NJCPX",
  "angularObjects": {
    "2BCMAZYZ5": [],
    "2BDF8WQWY": [],
    "2ARR8UZDJ": [],
    "2AS9P7JSA": [],
    "2AR33ZMZJ": []
  },
  "config": {
    "looknfeel": "default"
  },
  "info": {}
}